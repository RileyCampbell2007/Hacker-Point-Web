<!DOCTYPE html>
<html>
    <head>
        <title>:3 Translate</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap');

            body {
                font-family: 'Inter', sans-serif;
                background-color: #202020;
                color: #ffffff;
            }
            
            .center {
                margin-left: auto;
                margin-right: auto;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <audio id="boykisseraudio" src="/uwu/boykisser.mp3"></audio>
        <div class="center"><h1>:3 Translate</h1></div>
        <div class="center"><h2>A tool for conversing with transfems</h2></div>
        <br>
        <div class="center"><label for="input">What would you like to say? </label><input id="input" type="text" placeholder="Input">
        <button onclick="document.getElementById('result').innerHTML='<br><div class=\'center\'><h4>How to say that in :3</h4></div><div class=\'center\'>' + emulate_3(document.getElementById('input').value) + '</div>'">Submit</button></div>
        <br>
        <div id="result"></div>
        <br>
        <p id="error-container"></p>
        <script src="data:text/javascript,%21function%28f%2Ca%2Cc%29%7Bvar%20s%2Cl%3D256%2Cp%3D%22random%22%2Cd%3Dc.pow%28l%2C6%29%2Cg%3Dc.pow%282%2C52%29%2Cy%3D2%2Ag%2Ch%3Dl-1%3Bfunction%20n%28n%2Ct%2Cr%29%7Bfunction%20e%28%29%7Bfor%28var%20n%3Du.g%286%29%2Ct%3Dd%2Cr%3D0%3Bn%3Cg%3B%29n%3D%28n%2Br%29%2Al%2Ct%2A%3Dl%2Cr%3Du.g%281%29%3Bfor%28%3By%3C%3Dn%3B%29n%2F%3D2%2Ct%2F%3D2%2Cr%3E%3E%3E%3D1%3Breturn%28n%2Br%29%2Ft%7Dvar%20o%3D%5B%5D%2Ci%3Dj%28function%20n%28t%2Cr%29%7Bvar%20e%2Co%3D%5B%5D%2Ci%3Dtypeof%20t%3Bif%28r%26%26%22object%22%3D%3Di%29for%28e%20in%20t%29try%7Bo.push%28n%28t%5Be%5D%2Cr-1%29%29%7Dcatch%28n%29%7B%7Dreturn%20o.length%3Fo%3A%22string%22%3D%3Di%3Ft%3At%2B%22%5C0%22%7D%28%28t%3D1%3D%3Dt%3F%7Bentropy%3A%210%7D%3At%7C%7C%7B%7D%29.entropy%3F%5Bn%2CS%28a%29%5D%3Anull%3D%3Dn%3Ffunction%28%29%7Btry%7Bvar%20n%3Breturn%20s%26%26%28n%3Ds.randomBytes%29%3Fn%3Dn%28l%29%3A%28n%3Dnew%20Uint8Array%28l%29%2C%28f.crypto%7C%7Cf.msCrypto%29.getRandomValues%28n%29%29%2CS%28n%29%7Dcatch%28n%29%7Bvar%20t%3Df.navigator%2Cr%3Dt%26%26t.plugins%3Breturn%5B%2Bnew%20Date%2Cf%2Cr%2Cf.screen%2CS%28a%29%5D%7D%7D%28%29%3An%2C3%29%2Co%29%2Cu%3Dnew%20m%28o%29%3Breturn%20e.int32%3Dfunction%28%29%7Breturn%200%7Cu.g%284%29%7D%2Ce.quick%3Dfunction%28%29%7Breturn%20u.g%284%29%2F4294967296%7D%2Ce.double%3De%2Cj%28S%28u.S%29%2Ca%29%2C%28t.pass%7C%7Cr%7C%7Cfunction%28n%2Ct%2Cr%2Ce%29%7Breturn%20e%26%26%28e.S%26%26v%28e%2Cu%29%2Cn.state%3Dfunction%28%29%7Breturn%20v%28u%2C%7B%7D%29%7D%29%2Cr%3F%28c%5Bp%5D%3Dn%2Ct%29%3An%7D%29%28e%2Ci%2C%22global%22in%20t%3Ft.global%3Athis%3D%3Dc%2Ct.state%29%7Dfunction%20m%28n%29%7Bvar%20t%2Cr%3Dn.length%2Cu%3Dthis%2Ce%3D0%2Co%3Du.i%3Du.j%3D0%2Ci%3Du.S%3D%5B%5D%3Bfor%28r%7C%7C%28n%3D%5Br%2B%2B%5D%29%3Be%3Cl%3B%29i%5Be%5D%3De%2B%2B%3Bfor%28e%3D0%3Be%3Cl%3Be%2B%2B%29i%5Be%5D%3Di%5Bo%3Dh%26o%2Bn%5Be%25r%5D%2B%28t%3Di%5Be%5D%29%5D%2Ci%5Bo%5D%3Dt%3B%28u.g%3Dfunction%28n%29%7Bfor%28var%20t%2Cr%3D0%2Ce%3Du.i%2Co%3Du.j%2Ci%3Du.S%3Bn--%3B%29t%3Di%5Be%3Dh%26e%2B1%5D%2Cr%3Dr%2Al%2Bi%5Bh%26%28i%5Be%5D%3Di%5Bo%3Dh%26o%2Bt%5D%29%2B%28i%5Bo%5D%3Dt%29%5D%3Breturn%20u.i%3De%2Cu.j%3Do%2Cr%7D%29%28l%29%7Dfunction%20v%28n%2Ct%29%7Breturn%20t.i%3Dn.i%2Ct.j%3Dn.j%2Ct.S%3Dn.S.slice%28%29%2Ct%7Dfunction%20j%28n%2Ct%29%7Bfor%28var%20r%2Ce%3Dn%2B%22%22%2Co%3D0%3Bo%3Ce.length%3B%29t%5Bh%26o%5D%3Dh%26%28r%5E%3D19%2At%5Bh%26o%5D%29%2Be.charCodeAt%28o%2B%2B%29%3Breturn%20S%28t%29%7Dfunction%20S%28n%29%7Breturn%20String.fromCharCode.apply%280%2Cn%29%7Dif%28j%28c.random%28%29%2Ca%29%2C%22object%22%3D%3Dtypeof%20module%26%26module.exports%29%7Bmodule.exports%3Dn%3Btry%7Bs%3Drequire%28%22crypto%22%29%7Dcatch%28n%29%7B%7D%7Delse%22function%22%3D%3Dtypeof%20define%26%26define.amd%3Fdefine%28function%28%29%7Breturn%20n%7D%29%3Ac%5B%22seed%22%2Bp%5D%3Dn%7D%28%22undefined%22%21%3Dtypeof%20self%3Fself%3Athis%2C%5B%5D%2CMath%29%3B">
        </script>
        <script>
            // Get a reference to the error container
            const errorContainer = document.getElementById('error-container');

            // Define a function to display errors
            function displayError(message) {
                // Create a new error message element
                const errorMessage = document.createElement('div');
                errorMessage.classList.add('error-message');
                errorMessage.textContent = message;

                // Append the error message to the error container
                errorContainer.appendChild(errorMessage);
            }

            // Attach an error event listener to capture and display errors
            window.onerror = function (message, source, lineno, colno, error) {
                // Build an error message
                const errorMessage = `Error: ${message} at ${source}:${lineno}:${colno}`;

                // Display the error message in the error container
                displayError(errorMessage);

                // Prevent the default browser error handling
                return true;
            };

            // Include the seedrandom library
            // You can download it from https://github.com/davidbau/seedrandom
            // and include it in your HTML file before running this code

            // Predefined words to generate the emulated ":3"
            const words = ["nya", "meow", "purr~", "bl&#229;haj,", "nrrp", ":3", "nyaaaa~", ">:3", 'uwu~~', 'OwO', '<a class="boykisser" href="https://files.cults3d.com/uploaders/16600790/illustration-file/16a0b6ea-d282-444a-b222-5853ccd49e35/IMG_0316.webp"><img src="https://files.cults3d.com/uploaders/16600790/illustration-file/16a0b6ea-d282-444a-b222-5853ccd49e35/IMG_0316.webp" style="height:24px;""></a>'];

            const haii = ["Haii~!!", "Haiii~~"];

            function emulate_3(seed) {
                seed=seed.toLowerCase()
                var random = new Math.seedrandom(seed);
                const num_words = Math.floor(random() * (15 - 5 + 1)) + 5;
                let emulated_string = Array.from({
                        length: num_words
                    }, () =>
                    words[Math.floor(random() * words.length)]
                ).join(" ");

                if (emulated_string.endsWith(",")) {
                    emulated_string = emulated_string.slice(0, -1);
                }

                emulated_string +=["!!! üíôü©∑ü§çü©∑üíô‚ú®", "!?", "?!", "!!?", "??", "?"][Math.floor(random() * 6)];

                let shouldShowHaii = Math.floor(random() * 8) === 0;

                if (seed.includes("hello") || seed.toLowerCase().includes("hi")) {
                    shouldShowHaii = true;
                }

                if (shouldShowHaii) {
                    emulated_string = `${haii[Math.floor(random() * haii.length)]} ${emulated_string}`;
                }

                return emulated_string;
            }

            // Get a reference to the input element by its id
            const inputElement = document.getElementById("input");

            // Add an event listener for the "keydown" event on the input element
            inputElement.addEventListener("keydown", function(event) {
            // Check if the key pressed is the Enter key (key code 13)
                if (event.keyCode === 13) {
                    // Your code to execute when Enter is pressed goes here
                    // For example, you can call a function or perform some action
                    // Replace the following line with your desired action
                    document.getElementById('result').innerHTML='<br><div class="center"><h4>How to say that in :3</h4></div><div class="center" style="color: #FF69B4;">' + emulate_3(document.getElementById('input').value) + '</div>'
                }
            });

            function addEventListenerToBoyKisser() {
            const elements = document.querySelectorAll(".boykisser");

            elements.forEach(element => {
                if (element.getAttribute("set") !== "true") {
                    element.addEventListener("mouseover", () => {
                        document.getElementById('boykisseraudio').play()
                    });
                    element.setAttribute("set", "true");
                }
                });
            }

            setInterval(addEventListenerToBoyKisser, 100); // This will repeat the process every 1000 milliseconds (1 second).


        </script>
    </body>
</html>
